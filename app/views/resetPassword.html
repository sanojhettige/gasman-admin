<div ng-include="vm.pageContent.customHeaderUrl" class="header_wrap"></div>
<div class="container">
  <div class="login_container" ng-init="vm.checkURL()">
    <div class="col-md-12 col-md-offset-3">
      <section class="login_content">
        <img src="/assets/images/logo@1x.png" class="login-logo" />
        <form name="formOne" ng-init="vm.getTokenEmail();">
          <div class="h1_wrap col-md-12 mx-auto d-block">
            <h1
              style="color: #AFAFAB !important;font-weight: bold"
              ng-show="!vm.createPassword"
            >
              Password reset
            </h1>
            <h1
              style="color: #AFAFAB !important;font-weight: bold"
              ng-show="vm.createPassword"
            >
              Create Password
            </h1>
          </div>
          <div class="row">
            <div class="form-group has-feedback col-sm-12 col-md-12">
              <div>
                <input
                  class="form-control login-input"
                  id="username"
                  placeholder="Email"
                  ng-model="vm.username"
                  name="uname"
                  autocomplete="off"
                  ng-pattern="/^[aA-zZ]+[aA-zZ0-9._]+@[a-z]+\.[a-z.]{2,5}$/"
                  required
                  readonly="readonly"
                />
                <div class="errorMessage">
                  <p
                    ng-show="formOne.uname.$touched && formOne.uname.$error.required"
                  >
                    Email address is required.
                  </p>
                  <p
                    ng-show="formOne.uname.$touched && formOne.uname.$error.pattern"
                  >
                    Enter a valid email address.
                  </p>
                  <p ng-show="vm.errors.email">
                    {{ vm.errors.email }}
                  </p>
                </div>
              </div>
            </div>
            <div class="form-group has-feedback col-sm-12 col-md-12">
              <input
                class="form-control login-input"
                type="password"
                placeholder="Password"
                ng-model="vm.password"
                name="pass"
                ng-enter="vm.login(vm.username,vm.password);"
                required
              />
              <div class="errorMessage">
                <p
                  ng-show="formOne.pass.$touched && formOne.pass.$error.required"
                >
                  Password is required.
                </p>
                <p ng-show="vm.errors.password">
                  {{ vm.errors.password }}
                </p>
              </div>
            </div>
            <div class="form-group has-feedback col-sm-12 col-md-12">
              <input
                class="form-control login-input"
                type="password"
                placeholder="Password confirmation"
                ng-model="vm.cn_password"
                name="cpass"
                required
              />
              <div class="errorMessage">
                <p
                  ng-show="formOne.cpass.$touched && formOne.cpass.$error.required"
                >
                  Password confirmation is required.
                </p>
                <p ng-show="vm.errors.confirm_password">
                  {{ vm.errors.confirm_password }}
                </p>
              </div>
            </div>
          </div>
          <br />
          <div>
            <button
              ng-show="!vm.createPassword"
              ng-disabled="formOne.$invalid || vm.dataLoading"
              class="btn btn-red"
              style="width: 93%; color: white;background-color:#397FC0;border-radius: 2px"
              ng-click="vm.changePassword(vm.username,vm.password, vm.cn_password);"
            >
              RESET PASSWORD
            </button>
            <button
              ng-show="vm.createPassword"
              ng-disabled="formOne.$invalid || vm.dataLoading"
              class="btn btn-red"
              style="width: 93%; color: white;background-color:#397FC0;border-radius: 2px"
              ng-click="vm.changePassword(vm.username,vm.password, vm.cn_password);"
            >
              COMPLETE
            </button>
          </div>
          <div class="clearfix"></div>
          <div>
            <br />
            <p ng-show="!vm.createPassword">
              Back to <a ui-sref="app.login">Login?</a>
            </p>
            <p ng-show="vm.createPassword">
              <a ui-sref="app.login">Login Now</a>
            </p>
          </div>
        </form>
      </section>
    </div>
  </div>
</div>
<div ng-include="vm.pageContent.customFooterUrl" class="footer_wrap"></div>
