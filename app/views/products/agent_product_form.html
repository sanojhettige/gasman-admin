<div ng-init="vm.getProductById(ngDialogData.productId)">
  <h4 class="form-title">{{ ngDialogData.title }}</h4>
  <hr />
  <form autocomplete="off" id="editProduct" name="editProduct" novalidate>
    <div class="form-row">
      <div class="form-group has-feedback col-6">
        <label required for="proCategory" class="form-control-label"
          >Brand Name</label
        >
        <select
          class="form-control "
          id="proCategory"
          placeholder="Brand"
          ng-model="vm.productById.category_id"
          ng-class="{'is-invalid':vm.errors.category_id, 'is-invalid': editProduct.proCategory.$touched && editProduct.proCategory.$error.required}"
        >
          <option value="">Select a brand</option>
          <option
            ng-repeat="brd in ngDialogData.productBrands"
            value="{{ brd.id }}"
            >{{ brd.name }}</option
          >
        </select>
        <div class="invalid-feedback">
          <p
            ng-show="editProduct.proCategory.$touched && editProduct.proCategory.$error.required"
          >
            Product brand is required.
          </p>
          <p ng-show="vm.errors.category_id">
            {{ vm.errors.category_id }}
          </p>
        </div>
      </div>
      <div class="form-group has-feedback col-6">
        <label required for="productName" class="form-control-label"
          >Product Name</label
        >
        <select
          class="form-control "
          id="productName"
          placeholder="Name"
          ng-model="vm.productById.product_id"
          ng-class="{'is-invalid':vm.errors.product_id, 'is-invalid': editProduct.productName.$touched && editProduct.productName.$error.required}"
        >
          <option value="">Select a product</option>
          <option
            ng-repeat="prd in ngDialogData.mainProducts"
            value="{{ prd.id }}"
            >{{ prd.name }}</option
          >
        </select>
        <div class="invalid-feedback">
          <p
            ng-show="editProduct.productName.$touched && editProduct.productName.$error.required"
          >
            Product name is required.
          </p>
          <p ng-show="vm.errors.product_id">
            {{ vm.errors.product_id }}
          </p>
        </div>
      </div>
      <div class="form-group has-feedback col-12">
        <label for="price" class="form-control-label">Retail Price</label>
        <input
          class="form-control "
          id="price"
          placeholder="Ex: 100"
          ng-model="vm.productById.price"
          name="price"
          ng-pattern="/^[0-9]*$/"
          autocomplete="off"
          required
          ng-class="{'is-invalid':vm.errors.price, 'is-invalid': editProduct.price.$touched && editProduct.price.$error.required}"
        />
        <div class="invalid-feedback">
          <p
            ng-show="editProduct.price.$touched && editProduct.price.$error.required"
          >
            Retail price is required.
          </p>
          <p ng-show="vm.errors.price">
            {{ vm.errors.price }}
          </p>
        </div>
      </div>

      <div class="form-group has-feedback col-12">
        <label for="dCharge" class="form-control-label">Delivery Charge</label>
        <input
          class="form-control "
          id="dCharge"
          placeholder="Ex: 100"
          ng-model="vm.productById.delivery_charge"
          name="dCharge"
          ng-pattern="/^[0-9]*$/"
          autocomplete="off"
          required
          ng-class="{'is-invalid':vm.errors.delivery_charge, 'is-invalid': editProduct.dCharge.$touched && editProduct.dCharge.$error.required}"
        />
        <div class="invalid-feedback">
          <p
            ng-show="editProduct.dCharge.$touched && editProduct.dCharge.$error.required"
          >
            Delivery Charge is required.
          </p>
          <p ng-show="vm.errors.delivery_charge">
            {{ vm.errors.delivery_charge }}
          </p>
        </div>
      </div>
      <div class="form-group has-feedback col-12">
        <label for="depositCharge" class="form-control-label"
          >Deposite (For new cylinders)</label
        >
        <input
          class="form-control "
          id="depositCharge"
          placeholder="Ex: 1000"
          ng-model="vm.productById.deposit_amount"
          name="depositCharge"
          autocomplete="off"
          required
        />
        <div class="errorMessage">
          <p
            ng-show="editProduct.depositCharge.$touched && editProduct.depositCharge.$error.required"
            class="badge badge-danger"
          >
            Deposit amount is required.
          </p>
          <p ng-show="vm.errors.deposit_amount" class="badge badge-danger">
            {{ vm.errors.deposit_amount }}
          </p>
        </div>
      </div>

      <div class="form-group has-feedback col-12">
        <label for="remarks" class="form-control-label">Description</label>
        <textarea
          class="form-control "
          id="remarks"
          ng-model="vm.productById.description"
          name="remarks"
          ng-class="{'is-invalid':vm.errors.remarks, 'is-invalid': editProduct.remarks.$touched && editProduct.remarks.$error.required}"
          required
        ></textarea>
        <div class="invalid-feedback">
          <p
            ng-show="editProduct.remarks.$touched && editProduct.remarks.$error.required"
          >
            Description is required.
          </p>
          <p ng-show="vm.errors.remarks">
            {{ vm.errors.remarks }}
          </p>
        </div>
      </div>
    </div>
    <hr />
    <div class="row">
      <div class="modal-footer col-12">
        <button
          type="button"
          class="btn btn-default"
          ng-click="vm.closePopUp()"
          data-dismiss="modal"
        >
          Cancel
        </button>

        <button
          type="button"
          id="submit"
          class="btn btn-success"
          ng-click="vm.updateProduct(vm.productById)"
          ng-disabled="editProduct.productName.$invalid || editProduct.price.$invalid || vm.submitting"
        >
          {{ ngDialogData.saveBtn }}
        </button>
      </div>
    </div>
  </form>
</div>
