<div ng-init="vm.getUserById(ngDialogData.userId);">
    <h4 class="form-title">{{ ngDialogData.title }}</h4>
    <hr />
    <form autocomplete="off" id="editUser" name="editUser" novalidate>
        <div class="form-row">
            <div class="form-group has-feedback col-12">
                <label for="userName" class="form-control-label">Full Name</label>
                <input class="form-control " id="userName" placeholder="Name" ng-model="vm.userById.name" name="userName" autocomplete="off" required />
                <div class="errorMessage">
                    <p ng-show="editUser.userName.$touched && editUser.userName.$error.required" class="badge badge-danger">
                        Full Name is required.
                    </p>
                    <p ng-show="vm.errors.name" class="badge badge-danger">
                        {{ vm.errors.name }}
                    </p>
                </div>
            </div>

            <div class="form-group has-feedback col-12">
                <label for="userEmail" class="form-control-label">Email Address</label>
                <input class="form-control " id="userEmail" placeholder="" ng-model="vm.userById.email" name="userEmail" autocomplete="off" required />
                <div class="errorMessage">
                    <p ng-show="editUser.userEmail.$touched && editUser.userEmail.$error.required" class="badge badge-danger">
                        Email address is required.
                    </p>
                    <p ng-show="editUser.userEmail.$touched && editUser.userEmail.$error.pattern" class="badge badge-danger">
                        Enter a valid email address.
                    </p>
                    <p ng-show="vm.errors.email" class="badge badge-danger">
                        {{ vm.errors.email }}
                    </p>
                </div>
            </div>
            <div class="form-group has-feedback col-12">
                <label for="username" class="form-control-label">Username</label>
                <input class="form-control " id="username" placeholder="" ng-model="vm.userById.username" name="username" autocomplete="off" required />
                <div class="errorMessage">
                    <p ng-show="editUser.username.$touched && editUser.username.$error.required" class="badge badge-danger">
                        Username is required.
                    </p>
                    <p ng-show="vm.errors.username" class="badge badge-danger">
                        {{ vm.errors.username }}
                    </p>
                </div>
            </div>

            <div class="form-group has-feedback col-12">
                <label for="userPhone" class="form-control-label">Telephone Number</label
        >
        <input
          class="form-control "
          id="userPhone"
          placeholder=""
          ng-model="vm.userById.telephone"
          name="userPhone"
          autocomplete="off"
          required
        />
        <div class="errorMessage">
          <p
            ng-show="editUser.userPhone.$touched && editUser.userPhone.$error.required"
            class="badge badge-danger"
          >
            Telephone number is required.
          </p>
          <p
            ng-show="editUser.userPhone.$touched && editUser.userPhone.$error.pattern"
            class="badge badge-danger"
          >
            Enter valid telephone number.
          </p>
          <p ng-show="vm.errors.telephone" class="badge badge-danger">
            {{ vm.errors.telephone }}
          </p>
        </div>
      </div>
      <div class="form-group has-feedback col-12" ng-show="!ngDialogData.userId">
          <label for="role_id" class="form-control-label">User Role</label>
                <select name="role_id" id="role_id" class="form-control" required ng-model="vm.userById.role_id">
            <option value="">Select Role</option>
            <option
              ng-repeat="role in ngDialogData.roles"
              value="{{ role.id }}"
              >{{ role.name }}</option
            >
          </select>
                <div class="errorMessage">
                    <p ng-show="editUser.role_id.$touched && editUser.role_id.$error.required" class="badge badge-danger">
                        Role is required.
                    </p>
                    <p ng-show="vm.errors.role_id" class="badge badge-danger">
                        {{ vm.errors.role_id }}
                    </p>
                </div>
            </div>

            <div class="form-group has-feedback col-12" ng-show="ngDialogData.userId">
                <div class="checkbox-custom checkbox-primary">
                    <input type="checkbox" id="changePw" value="1" ng-model="vm.userById.changePw" />
                    <label for="changePw">Change Password</label>
                </div>
            </div>

            <div class="form-group has-feedback col-12" ng-if="!ngDialogData.userId || (ngDialogData.userId && vm.userById.changePw)">
                <label for="uPw" class="form-control-label">Password</label>
                <input class="form-control " id="uPw" placeholder="" ng-model="vm.userById.password" name="uPw" autocomplete="off" required type="password" />
                <div class="errorMessage">
                    <p ng-show="editUser.uPw.$touched && editUser.uPw.$error.required" class="badge badge-danger">
                        Password is required.
                    </p>
                    <p ng-show="vm.errors.password" class="badge badge-danger">
                        {{ vm.errors.password }}
                    </p>
                </div>
            </div>

            <div class="form-group has-feedback col-12" ng-if="!ngDialogData.userId || (ngDialogData.userId && vm.userById.changePw)">
                <label for="cPw" class="form-control-label">Password confirmation</label
        >
        <input
          class="form-control "
          id="cPw"
          placeholder=""
          ng-model="vm.userById.password_confirmation"
          name="cPw"
          autocomplete="off"
          required
          type="password"
        />
        <div class="errorMessage">
          <p
            ng-show="editUser.cPw.$touched && editUser.cPw.$error.required"
            class="badge badge-danger"
          >
            Password confirmation is required.
          </p>
          <p ng-show="vm.errors.confirm_password" class="badge badge-danger">
            {{ vm.errors.confirm_password }}
          </p>
        </div>
      </div>
    </div>
    <hr />
    <div class="row">
      <div class="modal-footer col-12">
        <button
          type="button"
          class="btn btn-default"
          ng-click="vm.closePopUp()"
          data-dismiss="modal"
        >
          Cancel
        </button>

        <button
          type="button"
          id="submit"
          class="btn btn-success"
          ng-click="vm.updateUser(vm.userById)"
          ng-disabled="editUser.name.$invalid || editUser.email.$invalid || editUser.telephone.$invalid || vm.submitting"
        >
          {{ ngDialogData.saveBtn }}
        </button>
      </div>
    </div>
  </form>
</div>